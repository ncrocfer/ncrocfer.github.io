<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ncrocfer, Python & Web security">

    
    <title>Modifier le header par défaut dans docutils // ncrocfer // Python & Web security</title>
    

    

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://ncrocfer.github.io/css/pure.css">
    <link rel="stylesheet" href="https://ncrocfer.github.io/css/pygments.css">
    

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    
<script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.0.1/jquery.fitvids.min.js"></script>
<script>
        $(document).ready(function(){
            $(".content").fitVids();
        });
    </script>

</head>

<body>

<div class="pure-g-r" id="layout">
    <div class="sidebar pure-u">
    <div class="cover-img" style="background-color: #0D302E;">
        <div class="cover-body">
            <header class="header">
                <hgroup>
                    <h1 class="brand-main"><a href="/">ncrocfer</a></h1>
                    <p class="tagline">Python & Web security</p>
                    
                    
                    <p class="links"><a href="https://ncrocfer.github.io/a-propos">A propos</a></p>
                    
                    
                    
                    <p class="links"><a href="https://ncrocfer.github.io/snippets">Snippets</a></p>
                    
                    
                    <p class="social">
                        
                        <a href="https://twitter.com/ncrocfer">
                            <i class="fa fa-twitter-square fa-3x"></i>
                        </a>
                        
                        <a href="https://github.com/ncrocfer">
                            <i class="fa fa-github fa-3x"></i>
                        </a>
                        
                    <p>
                </hgroup>
            </header>
        </div>
    </div>
</div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>Modifier le header par défaut dans docutils</h1>
                    
                        <p class="post-meta">
                            
                                category:
                            
                            
                                <a href="https://ncrocfer.github.io/categories/howtos">Howtos</a> 
                            , date: Wed 05 August 2015
                        </p>
                    
                    
                        <p class="post-meta">
                            
                                tag =
                            
                            
                                <a class="post-category" href="https://ncrocfer.github.io/tags/python">python</a>
                            
                        </p>
                    
                </header>
            </section>
            <div class="document">
<p>Je travaille actuellement sur un <a class="reference external" href="https://github.com/ncrocfer/radric">générateur statique de blog</a> qui génère les pages HTML à partir de la syntaxe <strong>reStructuredText</strong>.</p>
<p>J'utilise pour cela <strong>docutils</strong>, et par défaut les headers (h1, h2, h3...) sont générés par ordre croissant. Si il détecte un h1, alors un header de niveau moindre deviendra h2, ensuite h3, etc.</p>

<p>Malheureusement dans mon thème, le titre de chaque post n'est pas généré par docutils, mais apparaît directement dans un template en tant que h1. Ce qui fait que chaque titre généré par docutils par la suite sera également un h1.</p>
<p>Pour modifier cela, il faut placer le paramètre <strong>initial_header_level</strong> à la valeur souhaitée :</p>
<div class="highlight"><pre><span class="n">parts</span> <span class="o">=</span> <span class="n">publish_parts</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">plaintext</span><span class="p">,</span> <span class="n">writer_name</span><span class="o">=</span><span class="s">&#39;html&#39;</span><span class="p">,</span>
                      <span class="n">settings_overrides</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;initial_header_level&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,})</span>
<span class="k">return</span> <span class="n">parts</span><span class="p">[</span><span class="s">&#39;html_body&#39;</span><span class="p">]</span>
</pre></div>
<p>De cette façon les premiers headers seront directement générés en h2 (il faut mettre la valeur 3 pour h3, 4 pour h4, ...).</p>
</div>


            <a href="https://twitter.com/share" class="twitter-share-button" data-url="https://ncrocfer.github.io/2015/08/05/modifier-le-header-par-defaut-dans-docutils" data-text="Modifier le header par défaut dans docutils" data-via="ncrocfer">Tweet</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

            <div class="hr"></div>
            <a href="#" class="go-top">Go Top</a>
            <footer class="footer">
    <p>&copy; ncrocfer &ndash;
        Built with <a href="https://github.com/ncrocfer/radric">Radric</a>
        and a modified version of <a href="https://github.com/PurePelicanTheme/pure">Pure Theme</a>
    </p>
</footer>
        </div>
    </div>
</div>

<script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });
    </script>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-65778407-1', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>